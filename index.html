<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estado de Leitura</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìñ</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <style>
        /* --- ESTILOS GERAIS --- */
        :root { --bg-body: #ffffff; --text-color: #333; --primary-color: #2c3e50; --accent-color: #c0392b; --border-color: #eee; --whatsapp-color: #25D366; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Lato', sans-serif; background-color: var(--bg-body); color: var(--text-color); line-height: 1.8; overflow-x: hidden; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; color: var(--primary-color); }

        /* HEADER */
        header {
            background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1507842217153-e212234687ad?q=80&w=2070');
            background-size: cover; background-position: center;
            min-height: 250px; padding: 60px 20px;
            display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; color: white;
        }
        header h1 { font-size: 3rem; margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); line-height: 1.1; }
        header p { font-size: 1.2rem; opacity: 0.9; letter-spacing: 1px; margin-top: 10px; }
        @media (max-width: 768px) { header h1 { font-size: 2rem; } header p { font-size: 1rem; } }

        /* --- MENU (NAVBAR) --- */
        nav { background: white; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-color); box-shadow: 0 2px 10px rgba(0,0,0,0.03); }
        .menu-container { max-width: 1000px; margin: 0 auto; padding: 0 10px; position: relative; }

        /* Bot√£o Hamburguer (S√≥ aparece no mobile) */
        .mobile-btn { display: none; background: none; border: none; font-size: 1.8rem; cursor: pointer; color: var(--primary-color); padding: 15px; }

        nav ul { list-style: none; display: flex; justify-content: center; flex-wrap: wrap; margin: 0; padding: 0; }
        nav li { position: relative; }
        nav a { display: block; padding: 18px 20px; text-decoration: none; color: var(--primary-color); font-weight: bold; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; transition: 0.2s; cursor: pointer; white-space: nowrap; }
        nav a:hover { color: var(--accent-color); background: #fafafa; }

        /* Seta do Dropdown */
        .arrow { margin-left: 5px; font-size: 0.7rem; transition: transform 0.3s; display: inline-block; color: var(--accent-color); }

        /* DROPDOWN DESKTOP */
        .dropdown-content { display: none; position: absolute; background: white; min-width: 220px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); top: 100%; left: 50%; transform: translateX(-50%); text-align: center; z-index: 1001; padding-top: 10px; margin-top: -5px; }

        /* Comportamento Desktop: Hover */
        @media (min-width: 769px) {
            .dropdown:hover .dropdown-content { display: block; }
            .dropdown-content a { border-bottom: 1px solid #f0f0f0; text-transform: none; padding: 12px 20px; display: block; }
        }

        /* --- MOBILE (AJUSTES PARA FICAR IGUAL A FOTO) --- */
        @media (max-width: 768px) {
            .mobile-btn { display: block; } /* Mostra o bot√£o hamburguer */

            nav .menu-container { text-align: left; display: flex; justify-content: space-between; align-items: center; }

            nav ul {
                display: none; /* Esconde o menu inicialmente */
                flex-direction: column;
                width: 100%;
                position: absolute;
                top: 100%;
                left: 0;
                background: white;
                box-shadow: 0 10px 15px rgba(0,0,0,0.05);
                border-top: 1px solid #eee;
            }

            nav ul.show { display: flex; } /* Classe para mostrar via JS */

            nav li { width: 100%; text-align: left; }

            nav a {
                padding: 15px 25px;
                font-size: 0.85rem;
                border-bottom: 1px solid #f9f9f9;
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            /* Dropdown Mobile */
            .dropdown-content {
                position: static;
                display: none; /* Escondido por padr√£o */
                width: 100%;
                box-shadow: none;
                border: none;
                transform: none;
                background: #fff;
                padding-left: 20px; /* Indenta√ß√£o igual a foto */
            }

            .dropdown-content a {
                color: #555;
                font-weight: normal;
                text-transform: none;
                font-size: 0.9rem;
                padding: 12px 20px;
                border-bottom: 1px solid #eee;
                text-align: left;
            }

            /* Quando o dropdown est√° ativo no mobile */
            .dropdown.active .dropdown-content { display: block; }
            .dropdown.active > a { color: var(--accent-color); } /* Texto vermelho igual a foto */
            .dropdown.active .arrow { transform: rotate(180deg); }
        }

        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

        /* INTRO */
        .intro-blog { text-align: center; max-width: 750px; margin: 0 auto 50px auto; padding-bottom: 30px; border-bottom: 1px solid var(--border-color); }
        .intro-blog h2 { font-size: 2.2rem; margin-bottom: 25px; color: var(--primary-color); }
        .intro-blog p { font-size: 1.1rem; color: #555; margin-bottom: 15px; }
        .destaque-texto { color: var(--accent-color); font-weight: bold; font-family: 'Playfair Display', serif; font-style: italic; }

        /* PESQUISA */
        .search-wrapper { text-align: center; margin-bottom: 50px; }
        #input-pesquisa { width: 100%; max-width: 450px; padding: 12px 25px; border: 1px solid #ddd; border-radius: 50px; font-size: 1rem; font-family: 'Lato', sans-serif; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.02); transition: 0.3s; outline: none; }
        #input-pesquisa:focus { border-color: var(--primary-color); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }

        /* GRID */
        .posts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 35px; }
        .card { background: white; border: 1px solid #eee; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; transition: transform 0.3s ease, box-shadow 0.3s ease; height: 100%; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 12px 20px rgba(0,0,0,0.08); border-color: transparent; }
        .card-img-top { height: 200px; background-color: #f0f0f0; background-size: cover; background-position: center; }
        .card-body { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; }
        .badge-area { font-size: 0.7rem; text-transform: uppercase; font-weight: 700; color: var(--accent-color); margin-bottom: 12px; letter-spacing: 0.5px; }
        .card h3 { font-size: 1.3rem; margin-bottom: 10px; line-height: 1.35; color: #1a1a1a; }
        .meta-info { font-size: 0.8rem; color: #888; margin-bottom: 15px; }
        .resumo { font-size: 0.95rem; color: #666; margin-bottom: 20px; flex-grow: 1; line-height: 1.6; }
        .btn-ler { display: block; width: 100%; padding: 12px 0; text-align: center; border: 1px solid var(--primary-color); color: var(--primary-color); text-transform: uppercase; font-size: 0.75rem; font-weight: bold; cursor: pointer; background: transparent; transition: 0.3s; border-radius: 4px; letter-spacing: 1px; }
        .btn-ler:hover { background: var(--primary-color); color: white; }

        /* LEITURA */
        #tela-leitura { display: none; background: white; padding: 50px 0; animation: fadeIn 0.4s ease; }
        .leitura-header { max-width: 750px; margin: 0 auto 30px auto; text-align: left; }
        .btn-voltar { background: none; border: none; color: #777; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 5px; margin-bottom: 20px; padding: 0; transition: 0.2s; }
        .btn-voltar:hover { color: var(--accent-color); }
        .leitura-title { font-size: 2.8rem; line-height: 1.2; margin-bottom: 15px; color: #111; }
        @media (max-width: 768px) { .leitura-title { font-size: 2rem; } #tela-leitura { padding: 20px 0; } }
        .leitura-meta { color: #666; font-size: 0.95rem; border-left: 3px solid var(--accent-color); padding-left: 15px; margin-top: 20px; }
        .leitura-body { max-width: 750px; margin: 0 auto; font-size: 1.2rem; line-height: 1.8; color: #333; margin-bottom: 50px; }

        /* A√á√ïES */
        .actions-container { max-width: 750px; margin: 0 auto; padding-top: 30px; border-top: 1px solid #eee; }
        .actions-title { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; color: #888; margin-bottom: 15px; font-weight: bold; }
        .downloads-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .btn-file { display: flex; align-items: center; justify-content: center; gap: 10px; padding: 15px; background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 6px; text-decoration: none; color: #333; font-weight: bold; font-size: 0.9rem; transition: 0.2s; }
        .btn-file:hover { background: white; border-color: var(--primary-color); box-shadow: 0 4px 10px rgba(0,0,0,0.05); transform: translateY(-2px); }
        .btn-file span { font-size: 1.2rem; }

        .share-row { display: flex; gap: 15px; flex-wrap: wrap; }
        .btn-share { display: flex; align-items: center; gap: 8px; padding: 10px 20px; border-radius: 50px; font-size: 0.85rem; font-weight: bold; text-decoration: none; cursor: pointer; transition: 0.2s; }
        .share-zap { background: white; border: 1px solid var(--whatsapp-color); color: var(--whatsapp-color); }
        .share-zap:hover { background: var(--whatsapp-color); color: white; }
        .share-copy { background: white; border: 1px solid #888; color: #555; }
        .share-copy:hover { background: #555; color: white; border-color: #555; }

        /* TOAST */
        #toast-box { visibility: hidden; min-width: 250px; background-color: var(--primary-color); color: #fff; text-align: center; border-radius: 4px; padding: 16px; position: fixed; z-index: 2000; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2); opacity: 0; transition: opacity 0.5s, bottom 0.5s; }
        #toast-box.show { visibility: visible; opacity: 1; bottom: 50px; }

        footer { text-align: center; padding: 50px 20px; color: #777; font-size: 0.9rem; border-top: 1px solid #eee; margin-top: 60px; background: #fafafa; }
        footer p { margin-bottom: 10px; }
        footer strong { color: var(--primary-color); }
        footer a { color: var(--accent-color); text-decoration: none; font-weight: bold; }
        footer a:hover { text-decoration: underline; }

    </style>
</head>
<body>

    <header>
        <div>
            <h1>Estado de Leitura</h1>
            <p>Acervo Acad√™mico & Liter√°rio</p>
        </div>
    </header>

    <nav>
        <div class="menu-container">
            <button class="mobile-btn" onclick="toggleMenuMobile()">‚ò∞</button>

            <ul id="menu-list">
                <li><a onclick="filtrar('tudo', null, true); fecharMenu()">In√≠cio</a></li>
                <li><a onclick="filtrar('Obras da Fuvest', null, true); fecharMenu()">Obras da Fuvest</a></li>

                <li class="dropdown" id="lp-dropdown">
                    <a onclick="toggleDropdownMobile(event)">
                        L√≠ngua Portuguesa <span class="arrow">‚ñº</span>
                    </a>
                    <div class="dropdown-content" id="lp-content">
                        <a onclick="filtrar('L√≠ngua Portuguesa', null, true); fecharMenu()">Ver Todas</a>
                        <a onclick="filtrar('L√≠ngua Portuguesa', 'Produ√ß√£o Escrita', true); fecharMenu()">Produ√ß√£o Escrita</a>
                        <a onclick="filtrar('L√≠ngua Portuguesa', 'Leitura', true); fecharMenu()">Leitura</a>
                        <a onclick="filtrar('L√≠ngua Portuguesa', 'An√°lise Lingu√≠stica', true); fecharMenu()">An√°lise Lingu√≠stica</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <main class="container">

        <div id="tela-lista">

            <section id="secao-intro" class="intro-blog">
                <h2>Bem-vindos ao nosso Estado de Leitura</h2>
                <p>
                    Se para Manoel de Barros entrar em "estado de palavra" era atingir a liberdade dos p√°ssaros e o brinquedo da linguagem, para n√≥s, professores e futuros professores, o desafio √© instaurar um <span class="destaque-texto">Estado de Leitura</span>.
                </p>
                <p>
                    Desenvolvido pela turma do segundo semestre de 2025 da disciplina de Metodologia do Ensino de Portugu√™s II, ministrada pela professora Claudia Rosa Riolfi na Universidade de S√£o Paulo (USP), este blog nasce com o objetivo de ser um espa√ßo de troca e constru√ß√£o conjunta.
                </p>
                <p>
                    Aqui, a teoria da universidade aperta a m√£o da pr√°tica escolar. Convidamos voc√™ a navegar por nossas sequ√™ncias, adaptar nossos materiais e, principalmente, dialogar conosco.
                </p>
                <p style="margin-top: 20px; font-weight: bold; color: var(--primary-color);">
                    Sejam todos bem-vindos!
                </p>
            </section>

            <div class="search-wrapper">
                <input type="text" id="input-pesquisa" placeholder="üîç Pesquisar por t√≠tulo, autor ou assunto..." onkeyup="pesquisarGlobal()">
            </div>

            <h2 id="titulo-secao" style="margin-bottom: 30px; border-left: 4px solid var(--accent-color); padding-left: 15px; font-size: 1.8rem;">Destaques</h2>

            <div id="grid-posts" class="posts-grid">
                <p>Carregando...</p>
            </div>
        </div>

        <div id="tela-leitura">
            <div class="leitura-header">
                <button onclick="filtrar('tudo', null, true)" class="btn-voltar">‚Üê Voltar para o in√≠cio</button>
                <small id="ler-area" class="badge-area">√Årea</small>
                <h1 id="ler-titulo" class="leitura-title">Titulo da Mat√©ria</h1>
                <div class="leitura-meta">
                    Por <strong id="ler-autor" style="color:#333">Autor</strong> ‚Ä¢ <span id="ler-ano">Ano</span>
                </div>
            </div>

            <div id="ler-texto" class="leitura-body"></div>

            <div class="actions-container">
                <p class="actions-title">üìÇ Materiais Dispon√≠veis</p>
                <div id="area-downloads" class="downloads-grid"></div>

                <p class="actions-title" style="margin-top: 30px;">üì¢ Compartilhar</p>
                <div id="area-share" class="share-row"></div>
            </div>
        </div>
    </main>

    <div id="toast-box">Link copiado com sucesso! ‚úÖ</div>

    <footer>
        <p><strong>Criado por:</strong> Adassa Bacci Abrah√£o Oliveira Amaral e Jheniffer Domingues Caetano</p>
        <p>üìß Contato: <a href="mailto:blogmelp2@gmail.com">blogmelp2@gmail.com</a></p>
        <p style="margin-top: 20px; font-size: 0.75rem; opacity: 0.7;">&copy; 2025 Estado de Leitura - MELP 2USP</p>
    </footer>

    <script>
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSHpZ-AxInGfWLfEmzBVfNcATN9wGgYW0bgUUJ_pn48LvfibiKYYxQdAwlgs4RtjyJnqq1k-v_Q3hJM/pub?output=csv';

        // --- FUN√á√ïES DO MENU MOBILE ---
        function toggleMenuMobile() {
            const menu = document.getElementById('menu-list');
            menu.classList.toggle('show');
        }

        function toggleDropdownMobile(e) {
            // Verifica se est√° no mobile (largura menor que 768px)
            if (window.innerWidth <= 768) {
                e.preventDefault(); // Evita scroll ou a√ß√£o padr√£o
                const liParent = document.getElementById('lp-dropdown');
                liParent.classList.toggle('active');
            }
        }

        function fecharMenu() {
            // Fecha o menu se clicar em um link (boa pr√°tica mobile)
            if (window.innerWidth <= 768) {
                document.getElementById('menu-list').classList.remove('show');
            }
        }
        // ------------------------------

        let bancoDeDados = [];

        // FUN√á√ÉO DE SLUG
        function criarSlug(texto) {
            return texto.toString().toLowerCase()
                .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
                .replace(/["']/g, '').replace(/\s+/g, '-').replace(/[^\w\-]+/g, '')
                .replace(/\-\-+/g, '-').replace(/^-+/, '').replace(/-+$/, '');
        }

        function carregarBlog() {
            Papa.parse(SHEET_URL, {
                download: true, header: false, skipEmptyLines: true,
                complete: function(resultados) {
                    const linhas = resultados.data.slice(1);
                    const slugsVistos = {};

                    bancoDeDados = linhas.map((c, index) => {
                        let titulo = c[2] || "Sem Titulo";
                        let autor = c[0] || "Desconhecido";

                        // 1. Gera o Slug OFICIAL (T√≠tulo + Autor) - Formato Padr√£o
                        let rawSlug = titulo + "-" + autor;
                        let baseSlug = criarSlug(rawSlug);

                        let uniqueSlug = baseSlug;
                        if (slugsVistos[baseSlug]) {
                            slugsVistos[baseSlug]++;
                            uniqueSlug = `${baseSlug}-${slugsVistos[baseSlug]}`;
                        } else {
                            slugsVistos[baseSlug] = 1;
                        }

                        // 2. Gera o Slug ANTIGO (S√≥ T√≠tulo) - Formato Legado/Backup
                        let rawLegacy = titulo;
                        let legacySlug = criarSlug(rawLegacy);

                        return {
                            id: index,
                            slug: uniqueSlug,       // URL Padr√£o (Longa)
                            slugAntigo: legacySlug, // URL Backup (Curta)
                            autor: autor,
                            ano: c[1],
                            titulo: titulo,
                            texto: c[3],
                            link1: c[4], link2: c[5], link3: c[6], link4: c[7],
                            area: c[8], subarea: c[9]
                        };
                    });
                    processarRota();
                }
            });
        }

        function processarRota() {
            const params = new URLSearchParams(window.location.search);
            const postSlug = params.get('post');
            const cat = params.get('cat');
            const sub = params.get('sub');

            if (postSlug) {
                // Aceita tanto o link novo quanto o antigo
                const post = bancoDeDados.find(p => p.slug === postSlug || p.slugAntigo === postSlug);

                if (post) abrirPost(post.id, false);
            }
            else if (cat) {
                filtrar(cat, sub, false);
            }
            else {
                filtrar('tudo', null, false);
            }
        }

        window.addEventListener('popstate', function() {
            processarRota();
        });

        function renderizar(lista) {
            const area = document.getElementById('grid-posts');
            area.innerHTML = '';
            if (lista.length === 0) { area.innerHTML = '<p style="text-align:center;width:100%">Nada encontrado.</p>'; return; }

            lista.forEach(post => {
                let imgBg = 'https://images.unsplash.com/photo-1457369804613-52c61a468e7d?w=500';
                const areaTexto = post.area ? post.area.toLowerCase() : '';
                if(areaTexto.includes('fuvest')) imgBg = 'https://images.unsplash.com/photo-1491841550275-ad7854e35ca6?w=500';
                if(areaTexto.includes('portuguesa')) imgBg = 'https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=500';

                area.innerHTML += `
                    <div class="card">
                        <div class="card-img-top" style="background-image: url('${imgBg}')"></div>
                        <div class="card-body">
                            <div class="badge-area">${post.area || ''}</div>
                            <h3>${post.titulo || 'Sem T√≠tulo'}</h3>
                            <p class="meta-info">${post.autor || ''}</p>
                            <p class="resumo">${post.texto ? post.texto.substring(0, 100)+'...' : ''}</p>
                            <button onclick="abrirPost(${post.id}, true)" class="btn-ler">Ler Mat√©ria</button>
                        </div>
                    </div>
                `;
            });
        }

        function filtrar(cat, sub = null, atualizarUrl = true) {
            document.getElementById('input-pesquisa').value = '';

            if (atualizarUrl) {
                if (cat === 'tudo') {
                    window.history.pushState({}, '', window.location.pathname);
                } else {
                    const params = new URLSearchParams();
                    params.set('cat', cat);
                    if(sub) params.set('sub', sub);
                    window.history.pushState({}, '', '?' + params.toString());
                }
            }

            document.getElementById('tela-leitura').style.display = 'none';
            document.getElementById('tela-lista').style.display = 'block';
            window.scrollTo(0,0);

            const titulo = document.getElementById('titulo-secao');
            const intro = document.getElementById('secao-intro');

            if (cat === 'tudo') {
                titulo.innerText = 'Destaques';
                if(intro) intro.style.display = 'block';
                renderizar(bancoDeDados);
            } else {
                titulo.innerText = sub ? `${cat} > ${sub}` : cat;
                if(intro) intro.style.display = 'none';
                const filtrados = bancoDeDados.filter(p => {
                    const pArea = p.area ? p.area.toLowerCase() : '';
                    const pSub = p.subarea ? p.subarea.toLowerCase() : '';
                    if (sub) return pArea.includes(cat.toLowerCase()) && pSub.includes(sub.toLowerCase());
                    return pArea.includes(cat.toLowerCase());
                });
                renderizar(filtrados);
            }
        }

        function abrirPost(idBusca, atualizarUrl = true) {
            const post = bancoDeDados.find(p => p.id === idBusca);
            if(!post) return;

            if (atualizarUrl) {
                const novaUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?post=' + post.slug;
                window.history.pushState({path: novaUrl}, '', novaUrl);
            }

            document.getElementById('ler-titulo').innerText = post.titulo;
            document.getElementById('ler-autor').innerText = post.autor;
            document.getElementById('ler-ano').innerText = post.ano;
            document.getElementById('ler-area').innerText = post.area || '';
            document.getElementById('ler-texto').innerText = post.texto;

            const divDownloads = document.getElementById('area-downloads');
            const divShare = document.getElementById('area-share');
            divDownloads.innerHTML = '';
            divShare.innerHTML = '';

            if(post.link1 && post.link1.includes('http')) divDownloads.innerHTML += `<a href="${post.link1}" target="_blank" class="btn-file"><span>üìÑ</span> Material Principal</a>`;
            if(post.link2 && post.link2.includes('http')) divDownloads.innerHTML += `<a href="${post.link2}" target="_blank" class="btn-file"><span>üîó</span> Material Extra 1</a>`;
            if(post.link3 && post.link3.includes('http')) divDownloads.innerHTML += `<a href="${post.link3}" target="_blank" class="btn-file"><span>üîó</span> Material Extra 2</a>`;
            if(post.link4 && post.link4.includes('http')) divDownloads.innerHTML += `<a href="${post.link4}" target="_blank" class="btn-file"><span>üîó</span> Material Extra 3</a>`;

            if(divDownloads.innerHTML === '') divDownloads.innerHTML = '<p style="color:#999; font-style:italic;">Nenhum anexo dispon√≠vel.</p>';

            divShare.innerHTML += `<button onclick="copiarLink()" class="btn-share share-copy">üîó Copiar Link</button>`;

            const zapMsg = encodeURIComponent(`Olha que legal esse material: "${post.titulo}". Acesse: `);
            const zapUrl = window.location.href;
            divShare.innerHTML += `<a href="https://api.whatsapp.com/send?text=${zapMsg}${zapUrl}" target="_blank" class="btn-share share-zap">üì± WhatsApp</a>`;

            document.getElementById('tela-lista').style.display = 'none';
            document.getElementById('tela-leitura').style.display = 'block';

            const intro = document.getElementById('secao-intro');
            if(intro) intro.style.display = 'none';

            window.scrollTo(0,0);
        }

        function copiarLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                const toast = document.getElementById("toast-box");
                toast.className = "show";
                setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
            });
        }

        function pesquisarGlobal() {
            const termo = document.getElementById('input-pesquisa').value.toLowerCase();
            const tituloEl = document.getElementById('titulo-secao');
            const intro = document.getElementById('secao-intro');

            if (termo === '') {
                tituloEl.innerText = 'Destaques';
                if(intro) intro.style.display = 'block';
                renderizar(bancoDeDados);
                return;
            }

            tituloEl.innerText = `Resultados para "${termo}"`;
            if(intro) intro.style.display = 'none';

            const filtrados = bancoDeDados.filter(post => {
                const titulo = post.titulo?.toLowerCase() || '';
                const autor = post.autor?.toLowerCase() || '';
                const texto = post.texto?.toLowerCase() || '';
                const area = post.area?.toLowerCase() || '';
                return titulo.includes(termo) || autor.includes(termo) || texto.includes(termo) || area.includes(termo);
            });
            renderizar(filtrados);
        }
        carregarBlog();
    </script>
</body>
</html>